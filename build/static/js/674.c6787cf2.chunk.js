"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[674],{79674:function(e,r,n){n.r(r),n.d(r,{CreateNewAccountModal:function(){return R}});var t=n(4942),a=n(1413),c=n(93433),i=n(74165),o=n(15861),s=n(29439),l=n(72791),u=n(28620),d=n(8007),h=n(64554),x=n(3768),f=n(13400),p=n(36151),Z=n(5289),m=n(65661),y=n(39157),v=n(1582),b=n(68096),j=n(94925),g=n(99321),C=n(84638),w=n(48550),k=n(47071),S=n(97123),E=n(78983),K=n(38820),T=n(3710),N=n(5397),P=n(87378),D=n(57689),I=n(35125),q=(n(31052),n(80184)),R=function(e){var r=e.open,n=e.columns,c=e.onClose,u=e.onSubmit,d=(0,l.useState)((function(){return n.reduce((function(e,r){var n;return e[null!==(n=r.accessorKey)&&void 0!==n?n:""]="",e}),{})})),h=(0,s.Z)(d,2),x=h[0],f=h[1],K=(0,l.useState)([]),T=(0,s.Z)(K,2),N=T[0],P=T[1];(0,l.useEffect)((function(){fetch("http://localhost:8080/brands/all").then((function(e){return e.json()})).then((function(e){return P(e)})).catch((function(e){return console.error("Error fetching brands:",e)}))}),[]);var D=(0,l.useState)(!1),I=(0,s.Z)(D,2),R=I[0],z=I[1],A=(0,l.useState)(!1),O=(0,s.Z)(A,2),B=O[0],F=O[1],W=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n.forEach((function(e){"id"===e.accessorKey||x[e.accessorKey]?["inStock","price"].includes(e.accessorKey)&&isNaN(Number(x[e.accessorKey]))?r[e.accessorKey]="Must be a number":["name","code","brand","condition"].includes(e.accessorKey)&&!/^[A-Za-z0-9- ]+$/.test(x[e.accessorKey])&&(r[e.accessorKey]="Must contain only letters and spaces"):r[e.accessorKey]="Field required"})),L(r),0!==Object.keys(r).length){e.next=11;break}return e.next=6,u(x);case 6:c(),z(!0),f(n.reduce((function(e,r){var n;return e[null!==(n=r.accessorKey)&&void 0!==n?n:""]="",e}),{})),e.next=12;break;case 11:F(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=(0,l.useState)({}),M=(0,s.Z)(Y,2),_=M[0],L=M[1];return(0,q.jsxs)(q.Fragment,{children:[R&&(0,q.jsx)(E.oo,{autohide:!0,visible:!0,color:"success",className:"text-white align-items-center",style:{position:"fixed",right:"20px",top:"70px",zIndex:"10000"},onClose:function(){z(!1)},children:(0,q.jsxs)("div",{className:"d-flex",children:[(0,q.jsx)(E.S3,{children:"Data submitted successfully."}),(0,q.jsx)(E.Pv,{className:"me-2 m-auto",white:!0})]})}),B&&(0,q.jsx)(E.oo,{autohide:!0,visible:!0,className:"text-white align-items-center",style:{position:"fixed",right:"20px",top:"70px",zIndex:"10000"},color:"danger",onClose:function(){F(!1)},children:(0,q.jsxs)("div",{className:"d-flex",children:[(0,q.jsx)(E.S3,{children:"Please fix all the errors"}),(0,q.jsx)(E.Pv,{className:"me-2 m-auto",white:!0})]})}),(0,q.jsxs)(Z.Z,{open:r,children:[(0,q.jsx)(m.Z,{textAlign:"center",children:"Create New Product"}),(0,q.jsx)(y.Z,{children:(0,q.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:(0,q.jsx)(v.Z,{sx:{width:"100%",minWidth:{xs:"300px",sm:"360px",md:"400px"},gap:"1.5rem"},children:n.filter((function(e){return"id"!==e.accessorKey})).map((function(e){return(0,q.jsxs)(b.Z,{error:!!_[e.accessorKey],children:["condition"===e.accessorKey?(0,q.jsxs)(b.Z,{fullWidth:!0,children:[(0,q.jsx)(j.Z,{children:"SELECT CONDITION"}),(0,q.jsxs)(g.Z,{value:x[e.accessorKey],onChange:function(r){return f((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.accessorKey,r.target.value)))},fullWidth:!0,children:[(0,q.jsx)(C.Z,{value:"",style:{color:"grey"},children:"Select Condition"}),(0,q.jsx)(C.Z,{value:"In Stock",children:"In Stock"}),(0,q.jsx)(C.Z,{value:"Installation",children:"Installation"}),(0,q.jsx)(C.Z,{value:"In Use",children:"In Use"}),(0,q.jsx)(C.Z,{value:"Maintenance",children:"Maintenance"}),(0,q.jsx)(C.Z,{value:"Recycled",children:"Recycled"})]})]}):"warranty"===e.accessorKey?(0,q.jsxs)(b.Z,{fullWidth:!0,children:[(0,q.jsx)(j.Z,{children:"SELECT WARRANTY"}),(0,q.jsxs)(g.Z,{value:x[e.accessorKey],onChange:function(r){return f((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.accessorKey,r.target.value)))},fullWidth:!0,children:[(0,q.jsx)(C.Z,{value:"",style:{color:"grey"},children:"Select Warranty"}),(0,q.jsx)(C.Z,{value:"1 Year",children:"1 Year"}),(0,q.jsx)(C.Z,{value:"2 Years",children:"2 Years"}),(0,q.jsx)(C.Z,{value:"3 Years",children:"3 Years"})]})]}):"brand"===e.accessorKey?(0,q.jsxs)(b.Z,{fullWidth:!0,children:[(0,q.jsx)(j.Z,{children:"SELECT BRAND"}),(0,q.jsxs)(g.Z,{value:x[e.accessorKey],onChange:function(r){return f((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.accessorKey,r.target.value)))},fullWidth:!0,children:[(0,q.jsx)(C.Z,{value:"",style:{color:"grey"},children:"Select Brand"}),N.map((function(e){return(0,q.jsx)(C.Z,{value:e.name,children:e.name},e.id)}))]})]}):(0,q.jsx)(w.Z,{label:e.header,name:e.accessorKey,type:"number"===e.type?"number":"text",value:x[e.accessorKey],onChange:function(e){return f((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.target.name,e.target.value)))}}),_[e.accessorKey]&&(0,q.jsx)(k.Z,{children:_[e.accessorKey]})]},e.accessorKey)}))})})}),(0,q.jsxs)(S.Z,{sx:{p:"1.25rem"},children:[(0,q.jsx)(p.Z,{onClick:c,children:"Cancel"}),(0,q.jsx)(p.Z,{color:"info",onClick:W,variant:"contained",children:"Create"})]})]})]})},z=function(e){return!!e.length},A=function(e){return!!e.length&&e.toLowerCase().match(/^(([^<>()[\]\\.,:\s@"]+(\.[^<>()[\]\\.,:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},O=function(e){return e>=18&&e<=50};r.default=function(){var e=(0,l.useState)(!1),r=(0,s.Z)(e,2),n=r[0],Z=r[1],m=(0,l.useState)([]),y=(0,s.Z)(m,2),v=y[0],b=y[1],j=(0,l.useState)({}),g=(0,s.Z)(j,2),C=g[0],w=g[1],k=(0,l.useState)(!1),S=(0,s.Z)(k,2),B=S[0],F=S[1],W=(0,l.useState)(!1),Y=(0,s.Z)(W,2),M=Y[0],_=Y[1],L=(0,D.s0)();var U=(0,l.useCallback)((0,o.Z)((0,i.Z)().mark((function e(){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8080/products/all",{method:"GET"});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:n=e.sent,b(n),e.next=12;break;case 11:console.error("Failed to fetch data from the Oracle database");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error occurred while fetching data:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),[]);(0,l.useEffect)((function(){U()}),[U]);var J=d.Ry().shape({name:d.Z_().required("Name is required"),code:d.Z_().required("Code is required"),brand:d.Z_().required("Brand is required"),price:d.Rx().typeError("Price must be a number").required("Price is required"),inStock:d.Rx().typeError("Quantity must be a number").required("Quantity is required"),warranty:d.Z_().required("Warranty is required"),condition:d.Z_().required("Condition is required")}),Q=(0,l.useState)(!1),H=(0,s.Z)(Q,1)[0],V=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var n,t,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.validate(r,{abortEarly:!1});case 3:return e.next=5,fetch("http://localhost:8080/products/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:if(!(n=e.sent).ok){e.next=17;break}return e.next=9,n.text();case 9:t=e.sent,a=t?JSON.parse(t):{},o=[].concat((0,c.Z)(v),[a]),b(o),Z(!1),U(),e.next=18;break;case 17:H(!0);case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error occurred while creating a new row:",e.t0),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(r){return e.apply(this,arguments)}}(),$=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(r){var n,t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.exitEditingMode,t=r.row,a=r.values,Object.keys(C).length){e.next=12;break}return e.prev=2,e.next=5,fetch("http://localhost:8080/products/update/".concat(t.original.name),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:e.sent.ok?(v[t.index]=a,b((0,c.Z)(v)),n(),_(!0)):console.error("Failed to save row edits"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error occurred while saving row edits:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(r){return e.apply(this,arguments)}}(),G=(0,l.useState)(null),X=(0,s.Z)(G,2),ee=X[0],re=X[1],ne=(0,l.useState)(!1),te=(0,s.Z)(ne,2),ae=te[0],ce=te[1],ie=(0,l.useCallback)((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ee){e.next=11;break}return e.prev=1,e.next=4,fetch("http://localhost:8080/products/delete/".concat(ee.original.name),{method:"DELETE"});case 4:e.sent.ok?(v.splice(ee.index,1),b((0,c.Z)(v)),oe(),ce(!1)):console.error("Failed to delete a row"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error occurred while deleting a row:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),[ee,v]),oe=function(){F(!0)},se=function(){F(!1)},le=(0,l.useCallback)((function(e){return{error:!!C[e.id],helperText:C[e.id],onBlur:function(r){("email"===e.column.id?A(r.target.value):"age"===e.column.id?O(+r.target.value):z(r.target.value))?(delete C[e.id],w((0,a.Z)({},C))):w((0,a.Z)((0,a.Z)({},C),{},(0,t.Z)({},e.id,"".concat(e.column.columnDef.header," is required"))))}}}),[C]),ue=(0,l.useMemo)((function(){return[{accessorKey:"id",header:"ID",enableColumnOrdering:!0,enableEditing:!1,enableSorting:!0,size:80},{accessorKey:"name",header:"NAME",size:140,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"string"})},render:function(e){var r=e.row;return(0,q.jsx)("a",{href:"/products/productState",onClick:function(e){e.preventDefault(),L("/products/productState",{state:r.original})},children:r.original.name})}},{accessorKey:"code",header:"CODE",size:140,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"string"})}},{accessorKey:"brand",header:"BRAND",muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"string"})}},{accessorKey:"price",header:"PRICE(DH)",size:80,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"number"})}},{accessorKey:"inStock",header:"QUANTITY",size:80,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"number"})}},{accessorKey:"warranty",header:"WARRANTY",size:80,enableEditing:!1,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"string"})}},{accessorKey:"condition",header:"CONDITION",size:80,muiTableBodyCellEditTextFieldProps:function(e){var r=e.cell;return(0,a.Z)((0,a.Z)({},le(r)),{},{type:"string"})}}]}),[le,L]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(E.oo,{autohide:!0,visible:B,color:"success",className:"text-white align-items-center",style:{position:"fixed",right:"20px",top:"70px",zIndex:"10000"},onClose:se,children:(0,q.jsxs)("div",{className:"d-flex",children:[(0,q.jsx)(E.S3,{children:"Row deleted successfully!"}),(0,q.jsx)(E.Pv,{className:"me-2 m-auto",onClick:se})]})}),M&&(0,q.jsx)(E.oo,{autohide:!0,visible:!0,color:"success",className:"text-white align-items-center",style:{position:"fixed",right:"20px",top:"70px",zIndex:"10000"},onClose:function(){_(!1)},children:(0,q.jsxs)("div",{className:"d-flex",children:[(0,q.jsx)(E.S3,{children:"Data submitted successfully."}),(0,q.jsx)(E.Pv,{className:"me-2 m-auto",white:!0})]})}),(0,q.jsx)(u.ZP,{displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:ue,data:v,editingMode:"modal",enableColumnOrdering:!0,enableEditing:!0,onEditingRowSave:$,onEditingRowCancel:function(){w({})},renderRowActions:function(e){var r=e.row,n=e.table;return(0,q.jsxs)(h.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,q.jsx)(x.Z,{arrow:!0,placement:"bottom",title:"Edit",children:(0,q.jsx)(f.Z,{onClick:function(){return n.setEditingRow(r)},children:(0,q.jsx)(K.Z,{})})}),(0,q.jsx)(x.Z,{arrow:!0,placement:"bottom",title:"View Details",children:(0,q.jsx)(f.Z,{color:"primary",onClick:function(){return function(e){var r=e.original.condition,n=e.original.id,t=e.original.name,a=e.original.code,c=e.original.brand,i=e.original.price,o=e.original.inStock,s=e.original.warranty;L("/products/productState",{state:{condition:r,id:n,name:t,code:a,brand:c,price:i,inStock:o,warranty:s}})}(r)},children:(0,q.jsx)(T.Z,{})})}),(0,q.jsx)(x.Z,{arrow:!0,placement:"bottom",title:"Delete",children:(0,q.jsx)(f.Z,{color:"error",onClick:function(){re(r),ce(!0)},children:(0,q.jsx)(N.Z,{})})}),(0,q.jsx)(x.Z,{arrow:!0,placement:"bottom",title:"Download Data",children:(0,q.jsx)(f.Z,{color:"info",onClick:function(){return function(e){var r=function(e){return[{label:"ID",value:e.id},{label:"Name",value:e.name},{label:"Code",value:e.code},{label:"Brand",value:e.brand},{label:"Price",value:e.price},{label:"In Stock",value:e.inStock},{label:"Warranty",value:e.warranty},{label:"Condition",value:e.condition}]}(e),n=new I.default,t=r.map((function(e){return[e.label,e.value]}));n.autoTable({head:[["Label","Value"]],body:t,startY:10}),n.save("".concat(e.name,"_qr_code.pdf"))}(r.original)},children:(0,q.jsx)(P.Z,{})})})]})},renderTopToolbarCustomActions:function(){return(0,q.jsx)(p.Z,{color:"info",onClick:function(){return Z(!0)},variant:"contained",children:"Create New Product"})}}),(0,q.jsx)(R,{columns:ue,open:n,onClose:function(){return Z(!1)},onSubmit:V}),(0,q.jsxs)(E.Tk,{backdrop:"static",visible:ae,onClose:function(){return ce(!1)},children:[(0,q.jsx)(E.p0,{children:(0,q.jsx)(E.fl,{children:"Modal title"})}),(0,q.jsx)(E.sD,{children:"I will not close if you click outside my."}),(0,q.jsxs)(E.Ym,{children:[(0,q.jsx)(E.u5,{color:"secondary",onClick:function(){return ce(!1)},children:"Close"}),(0,q.jsx)(E.u5,{color:"primary",onClick:ie,children:"Save changes"})]})]})]})}}}]);
//# sourceMappingURL=674.c6787cf2.chunk.js.map